(()=>{"use strict";const e=(window.JitsiMeetJS||(window.JitsiMeetJS={}),window.JitsiMeetJS.app||(window.JitsiMeetJS.app={}),window.JitsiMeetJS.app);e.analyticsHandlers=e.analyticsHandlers||[],e.analyticsHandlers.push(class extends class{constructor(e={}){this._enabled=!1,this._whiteListedEvents=e.whiteListedEvents,this._blackListedEvents=[...e.blackListedEvents||[],"e2e_rtt","rtp.stats","rtt.by.region","available.device","stream.switch.delay","ice.state.changed","ice.duration","peer.conn.status.duration"]}_extractName(e){if("page"===e.type)return e.name;const{action:t,actionSubject:i,source:s}=e;let a=t;return i&&i!==t&&(a=`${i}.${t}`),s&&s!==t&&(a=`${s}.${a}`),a}_shouldIgnore(e){var t;if(!e||!this._enabled)return!0;const i=null!==(t=this._extractName(e))&&void 0!==t?t:"";return Array.isArray(this._whiteListedEvents)?-1===this._whiteListedEvents.indexOf(i):!!Array.isArray(this._blackListedEvents)&&-1!==this._blackListedEvents.indexOf(i)}}{constructor(e){if(super(e),this._userProperties={},!e.googleAnalyticsTrackingId)throw new Error("Failed to initialize Google Analytics handler, no tracking ID");this._enabled=!0,this._initGoogleAnalytics(e)}_initGoogleAnalytics(e){var t,i,s,a,n;t=window,i=document,s="script",t.GoogleAnalyticsObject="ga",t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,a=i.createElement(s),n=i.getElementsByTagName(s)[0],a.async=1,a.src="//www.google-analytics.com/analytics.js",n.parentNode.insertBefore(a,n),ga("create",e.googleAnalyticsTrackingId,"auto"),ga("send","pageview")}_extractValue(e){var t;let i=null===(t=null==e?void 0:e.attributes)||void 0===t?void 0:t.value;return i=Math.round(parseFloat(null!=i?i:"")),i}_extractLabel(e){const{attributes:t={}}=e,i=Object.keys(t).map((e=>`${e}=${t[e]}`));return i.push(this._userPropertiesString),i.join("&")}setUserProperties(e={}){if(!this._enabled)return;const t=["user_agent","callstats_name"];this._userPropertiesString=Object.keys(e).filter((e=>-1===t.indexOf(e))).map((t=>`permanent_${t}=${e[t]}`)).join("&")}sendEvent(e){if(this._shouldIgnore(e))return;const t={eventCategory:"jitsi-meet",eventAction:this._extractName(e),eventLabel:this._extractLabel(e)},i=this._extractValue(e);isNaN(i)||(t.eventValue=i),ga("send","event",t)}})})();
//# sourceMappingURL=analytics-ga.min.js.map