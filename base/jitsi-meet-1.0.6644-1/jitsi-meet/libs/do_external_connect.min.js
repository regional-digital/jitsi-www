(()=>{"use strict";var o={571:(o,t)=>{const n=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;t.parse=function(o){const e="object"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1]),r=(arguments.length<=1?0:arguments.length-1)>1||!e?arguments.length<=1?void 0:arguments[1]:void 0,c=(arguments.length<=1?0:arguments.length-1)>1&&(arguments.length<=2?void 0:arguments[2])||e||{},i=JSON.parse(o,r);return"ignore"===c.protoAction?i:i&&"object"==typeof i&&o.match(n)?(t.scan(i,c),i):i},t.scan=function(o){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[o];for(;n.length;){const o=n;n=[];for(const e of o){if(Object.prototype.hasOwnProperty.call(e,"__proto__")){if("remove"!==t.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete e.__proto__}for(const o in e){const t=e[o];t&&"object"==typeof t&&n.push(e[o])}}}},t.safeParse=function(o,n){try{return t.parse(o,n)}catch(o){return null}}}},t={};function n(e){var r=t[e];if(void 0!==r)return r.exports;var c=t[e]={exports:{}};return o[e](c,c.exports,n),c.exports}(()=>{var o=n(571);const t=["__proto__","constructor","prototype"];function e(n,e=!1,r="hash"){"string"==typeof n&&(n=new URL(n));const c="search"===r?n.search:n.hash,i={},s=(null==c?void 0:c.substr(1).split("&"))||[];if("hash"===r&&1===s.length){const o=s[0];if(o.startsWith("/")&&1===o.split("&").length)return i}return s.forEach((n=>{const r=n.split("="),c=r[0];if(!c||c.split(".").some((o=>t.includes(o))))return;let s;try{if(s=r[1],!e){const t=decodeURIComponent(s).replace(/\\&/,"&");s="undefined"===t?void 0:o.parse(t)}}catch(o){return void function(o,t=""){var n;console.error(t,o),null===(n=window.onerror)||void 0===n||n.call(window,t,void 0,void 0,void 0,o)}(o,`Failed to parse URL parameter value: ${String(s)}`)}i[c]=s})),i}if("function"==typeof createConnectionExternally){let o=e(window.location,!0,"hash")["config.externalConnectUrl"]||config.websocket?void 0:config.externalConnectUrl;const t=e(window.location,!0,"hash")["config.iAmRecorder"];let n;if(o&&(n=function(){const o=window.location.pathname;return function(o){if(!o)return o;try{o=decodeURIComponent(o)}catch(o){}return o=null==(o=o.normalize("NFKC"))?void 0:o.toLowerCase(),(o=encodeURIComponent(null!=o?o:"")).toLowerCase()}(o.substring(o.lastIndexOf("/")+1)||void 0)}())&&!t){o+=`?room=${n}`;const t=e(window.location,!0,"search").jwt;t&&(o+=`&token=${t}`),createConnectionExternally(o,(o=>{window.XMPPAttachInfo={status:"success",data:o},r()}),c)}else c()}else c();function r(){window.APP&&"ready"===window.APP.connect.status&&window.APP.connect.handler()}function c(o){o&&console.warn(o),window.XMPPAttachInfo={status:"error"},r()}})()})();
//# sourceMappingURL=do_external_connect.min.js.map