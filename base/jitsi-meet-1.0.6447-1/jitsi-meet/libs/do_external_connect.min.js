/*! For license information please see do_external_connect.min.js.LICENSE.txt */
(()=>{var t={571:(t,o)=>{"use strict";const e=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;o.parse=function(t){const n="object"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1]),r=(arguments.length<=1?0:arguments.length-1)>1||!n?arguments.length<=1?void 0:arguments[1]:void 0,c=(arguments.length<=1?0:arguments.length-1)>1&&(arguments.length<=2?void 0:arguments[2])||n||{},i=JSON.parse(t,r);return"ignore"===c.protoAction?i:i&&"object"==typeof i&&t.match(e)?(o.scan(i,c),i):i},o.scan=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=[t];for(;e.length;){const t=e;e=[];for(const n of t){if(Object.prototype.hasOwnProperty.call(n,"__proto__")){if("remove"!==o.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete n.__proto__}for(const t in n){const o=n[t];o&&"object"==typeof o&&e.push(n[t])}}}},o.safeParse=function(t,e){try{return o.parse(t,e)}catch(t){return null}}},415:t=>{function o(){return new DOMException("The request is not allowed","NotAllowedError")}t.exports=async function(t){try{await async function(t){if(!navigator.clipboard)throw o();return navigator.clipboard.writeText(t)}(t)}catch(e){try{await async function(t){const e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre",e.style.webkitUserSelect="auto",e.style.userSelect="all",document.body.appendChild(e);const n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(e),n.addRange(r);let c=!1;try{c=window.document.execCommand("copy")}finally{n.removeAllRanges(),window.document.body.removeChild(e)}if(!c)throw o()}(t)}catch(t){throw t||e||o()}}}}},o={};function e(n){var r=o[n];if(void 0!==r)return r.exports;var c=o[n]={exports:{}};return t[n](c,c.exports,e),c.exports}(()=>{"use strict";e(415);var t=e(571);const o=["__proto__","constructor","prototype"];function n(e,n=!1,r="hash"){"string"==typeof e&&(e=new URL(e));const c="search"===r?e.search:e.hash,i={},a=c&&c.substr(1).split("&")||[];if("hash"===r&&1===a.length){const t=a[0];if(t.startsWith("/")&&1===t.split("&").length)return i}return a.forEach((e=>{const r=e.split("="),c=r[0];if(!c||c.split(".").some((t=>o.includes(t))))return;let a;try{if(a=r[1],!n){const o=decodeURIComponent(a).replace(/\\&/,"&");a="undefined"===o?void 0:t.parse(o)}}catch(t){return void function(t,o=""){console.error(o,t),window.onerror&&window.onerror(o,void 0,void 0,void 0,t)}(t,`Failed to parse URL parameter value: ${String(a)}`)}i[c]=a})),i}if("function"==typeof createConnectionExternally){let t=n(window.location,!0,"hash")["config.externalConnectUrl"]||config.websocket?void 0:config.externalConnectUrl;const o=n(window.location,!0,"hash")["config.iAmRecorder"];let e;if(t&&(e=function(){const t=window.location.pathname;return function(t){if(!t)return t;try{t=decodeURIComponent(t)}catch(t){}return t=null==(t=t.normalize("NFKC"))?void 0:t.toLowerCase(),(t=encodeURIComponent(null!=t?t:"")).toLowerCase()}(t.substring(t.lastIndexOf("/")+1)||void 0)}())&&!o){t+=`?room=${e}`;const o=n(window.location,!0,"search").jwt;o&&(t+=`&token=${o}`),createConnectionExternally(t,(t=>{window.XMPPAttachInfo={status:"success",data:t},r()}),c)}else c()}else c();function r(){window.APP&&"ready"===window.APP.connect.status&&window.APP.connect.handler()}function c(t){t&&console.warn(t),window.XMPPAttachInfo={status:"error"},r()}})()})();
//# sourceMappingURL=do_external_connect.min.js.map