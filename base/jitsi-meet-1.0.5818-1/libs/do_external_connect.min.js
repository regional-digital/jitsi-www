/*! For license information please see do_external_connect.min.js.LICENSE.txt */
(()=>{var t={571:(t,e)=>{"use strict";const o=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;e.parse=function(t){const n="object"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1]),r=(arguments.length<=1?0:arguments.length-1)>1||!n?arguments.length<=1?void 0:arguments[1]:void 0,c=(arguments.length<=1?0:arguments.length-1)>1&&(arguments.length<=2?void 0:arguments[2])||n||{},i=JSON.parse(t,r);return"ignore"===c.protoAction?i:i&&"object"==typeof i&&t.match(o)?(e.scan(i,c),i):i},e.scan=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[t];for(;o.length;){const t=o;o=[];for(const n of t){if(Object.prototype.hasOwnProperty.call(n,"__proto__")){if("remove"!==e.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete n.__proto__}for(const t in n){const e=n[t];e&&"object"==typeof e&&o.push(n[t])}}}},e.safeParse=function(t,o){try{return e.parse(t,o)}catch(t){return null}}},415:t=>{function e(){return new DOMException("The request is not allowed","NotAllowedError")}t.exports=async function(t){try{await async function(t){if(!navigator.clipboard)throw e();return navigator.clipboard.writeText(t)}(t)}catch(o){try{await async function(t){const o=document.createElement("span");o.textContent=t,o.style.whiteSpace="pre",o.style.webkitUserSelect="auto",o.style.userSelect="all",document.body.appendChild(o);const n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(o),n.addRange(r);let c=!1;try{c=window.document.execCommand("copy")}finally{n.removeAllRanges(),window.document.body.removeChild(o)}if(!c)throw e()}(t)}catch(t){throw t||o||e()}}}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}(()=>{"use strict";function t(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.error(e,t),window.onerror&&window.onerror(e,null,null,null,t)}o(415);var e=o(571);const n=["__proto__","constructor","prototype"];function r(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hash";const i="search"===c?o.search:o.hash,a={},s=i&&i.substr(1).split("&")||[];if("hash"===c&&1===s.length){const t=s[0];if(t.startsWith("/")&&1===t.split("&").length)return a}return s.forEach((o=>{const c=o.split("="),i=c[0];if(!i||i.split(".").some((t=>n.includes(t))))return;let s;try{if(s=c[1],!r){const t=decodeURIComponent(s).replace(/\\&/,"&");s="undefined"===t?void 0:e.parse(t)}}catch(e){return void t(e,`Failed to parse URL parameter value: ${String(s)}`)}a[i]=s})),a}if("function"==typeof createConnectionExternally){let t=r(window.location,!0,"hash")["config.externalConnectUrl"]||config.websocket?void 0:config.externalConnectUrl;const e=r(window.location,!0,"hash")["config.iAmRecorder"];let o;if(t&&(o=function(){const t=window.location.pathname;return function(t){if(!t)return t;try{t=decodeURIComponent(t)}catch(t){}return t=(t=t.normalize("NFKC")).toLowerCase(),(t=encodeURIComponent(t)).toLowerCase()}(t.substring(t.lastIndexOf("/")+1)||void 0)}())&&!e){t+=`?room=${o}`;const e=r(window.location,!0,"search").jwt;e&&(t+=`&token=${e}`),createConnectionExternally(t,(t=>{window.XMPPAttachInfo={status:"success",data:t},c()}),i)}else i()}else i();function c(){window.APP&&"ready"===window.APP.connect.status&&window.APP.connect.handler()}function i(t){t&&console.warn(t),window.XMPPAttachInfo={status:"error"},c()}})()})();
//# sourceMappingURL=do_external_connect.min.js.map