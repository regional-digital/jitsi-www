(()=>{"use strict";var t={571:(t,o)=>{const n=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*\:/;o.parse=function(t){const e="object"==typeof(arguments.length<=1?void 0:arguments[1])&&(arguments.length<=1?void 0:arguments[1]),r=(arguments.length<=1?0:arguments.length-1)>1||!e?arguments.length<=1?void 0:arguments[1]:void 0,c=(arguments.length<=1?0:arguments.length-1)>1&&(arguments.length<=2?void 0:arguments[2])||e||{},i=JSON.parse(t,r);return"ignore"===c.protoAction?i:i&&"object"==typeof i&&t.match(n)?(o.scan(i,c),i):i},o.scan=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[t];for(;n.length;){const t=n;n=[];for(const e of t){if(Object.prototype.hasOwnProperty.call(e,"__proto__")){if("remove"!==o.protoAction)throw new SyntaxError("Object contains forbidden prototype property");delete e.__proto__}for(const t in e){const o=e[t];o&&"object"==typeof o&&n.push(e[t])}}}},o.safeParse=function(t,n){try{return o.parse(t,n)}catch(t){return null}}}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var c=o[e]={exports:{}};return t[e](c,c.exports,n),c.exports}(()=>{var t=n(571);const o=["__proto__","constructor","prototype"];function e(n,e=!1,r="hash"){"string"==typeof n&&(n=new URL(n));const c="search"===r?n.search:n.hash,i={},s=c?.substr(1).split("&")||[];if("hash"===r&&1===s.length){const t=s[0];if(t.startsWith("/")&&1===t.split("&").length)return i}return s.forEach((n=>{const r=n.split("="),c=r[0];if(!c||c.split(".").some((t=>o.includes(t))))return;let s;try{if(s=r[1],!e){const o=decodeURIComponent(s).replace(/\\&/,"&");s="undefined"===o?void 0:t.parse(o)}}catch(t){return void function(t,o=""){console.error(o,t),window.onerror?.(o,void 0,void 0,void 0,t)}(t,`Failed to parse URL parameter value: ${String(s)}`)}i[c]=s})),i}var r;if(function(t){t[t.PaymentRequired=402]="PaymentRequired"}(r||(r={})),"function"==typeof createConnectionExternally){let t=e(window.location,!0,"hash")["config.externalConnectUrl"]||config.websocket?void 0:config.externalConnectUrl;const o=e(window.location,!0,"hash")["config.iAmRecorder"];let n;if(t&&(n=function(){const t=window.location.pathname;return function(t){if(!t)return t;try{t=decodeURIComponent(t)}catch(t){}return t=(t=t.normalize("NFKC"))?.toLowerCase(),(t=encodeURIComponent(t??"")).toLowerCase()}(t.substring(t.lastIndexOf("/")+1)||void 0)}())&&!o){t+=`?room=${n}`;const o=e(window.location,!0,"search").jwt;o&&(t+=`&token=${o}`),createConnectionExternally(t,(t=>{window.XMPPAttachInfo={status:"success",data:t},c()}),i)}else i()}else i();function c(){window.APP&&"ready"===window.APP.connect.status&&window.APP.connect.handler()}function i(t){t&&console.warn(t),window.XMPPAttachInfo={status:"error"},c()}})()})();
//# sourceMappingURL=do_external_connect.min.js.map